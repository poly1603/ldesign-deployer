# Changelog

All notable changes to @ldesign/deployer will be documented in this file.

## [0.4.0] - 2025-12

### âœ¨ æ–°å¢åŠŸèƒ½

#### SSH/SFTP éƒ¨ç½²
- æ–°å¢ `SSHClient` SSH å®¢æˆ·ç«¯
- æ–°å¢ `SFTPClient` SFTP æ–‡ä»¶ä¼ è¾“
- æ–°å¢ `SSHDeployer` Capistrano é£æ ¼éƒ¨ç½²
- æ”¯æŒè·³æ¿æœºã€ç§é’¥è®¤è¯
- CLI å‘½ä»¤: `ssh:deploy`, `ssh:rollback`

#### äº‘å¹³å°éƒ¨ç½²
- æ–°å¢ `ECSDeployer` AWS ECS éƒ¨ç½²
- æ–°å¢ `CloudRunDeployer` GCP Cloud Run éƒ¨ç½²
- æ”¯æŒä»»åŠ¡å®šä¹‰æ›´æ–°ã€æœåŠ¡ç¨³å®šæ€§ç­‰å¾…

#### éƒ¨ç½²æŒ‡æ ‡ä¸åˆ†æ
- æ–°å¢ `MetricsCollector` æŒ‡æ ‡æ”¶é›†å™¨
- æ–°å¢ `MetricsAnalyzer` æŒ‡æ ‡åˆ†æå™¨
- æ”¯æŒæˆåŠŸç‡ã€P50/P90/P99 å»¶è¿Ÿç»Ÿè®¡
- æ”¯æŒéƒ¨ç½²å¥åº·åº¦è¯„åˆ†
- CLI å‘½ä»¤: `metrics:stats`, `metrics:health`

#### ä¼ä¸šå¾®ä¿¡é€šçŸ¥
- æ–°å¢ `WeChatWorkNotifier` ä¼ä¸šå¾®ä¿¡æœºå™¨äººé€šçŸ¥
- æ”¯æŒ Markdown å’Œæ–‡æœ¬æ ¼å¼
- æ”¯æŒ @ ç”¨æˆ·å’Œ @ æ‰€æœ‰äºº

#### é…ç½®åŠ å¯†
- æ–°å¢ `ConfigEncryptor` é…ç½®åŠ å¯†å™¨
- æ–°å¢ `SecretEncryptor` å¯†é’¥åŠ å¯†å™¨
- æ–°å¢ `ConfigFileEncryptor` é…ç½®æ–‡ä»¶åŠ å¯†
- ä½¿ç”¨ AES-256-GCM åŠ å¯†ç®—æ³•
- CLI å‘½ä»¤: `encrypt:config`, `encrypt:decrypt`

#### å¹¶è¡Œéƒ¨ç½²
- æ–°å¢ `ParallelDeployer` å¹¶è¡Œéƒ¨ç½²å™¨
- æ”¯æŒå¤šç¯å¢ƒåŒæ—¶éƒ¨ç½²
- æ”¯æŒå¹¶å‘æ§åˆ¶å’Œå¤±è´¥åœæ­¢
- CLI å‘½ä»¤: `parallel`

#### å¤‡ä»½ç®¡ç†
- æ–°å¢ `BackupManager` å¤‡ä»½ç®¡ç†å™¨
- æ”¯æŒå‹ç¼©å¤‡ä»½å’Œæ¢å¤
- æ”¯æŒè‡ªåŠ¨æ¸…ç†æ—§å¤‡ä»½
- CLI å‘½ä»¤: `backup:create`, `backup:list`, `backup:restore`

### ğŸ”§ æ”¹è¿›

- æ›´æ–°ä¸»å…¥å£å¯¼å‡ºæ–°æ¨¡å—
- æ·»åŠ  10+ ä¸ªæ–° CLI å‘½ä»¤
- ä¼˜åŒ–æ¨¡å—ç»„ç»‡ç»“æ„

### ğŸ“Š ç»Ÿè®¡

- **æ–°å¢æ–‡ä»¶:** 20+ ä¸ª
- **æ–°å¢ CLI å‘½ä»¤:** 10+ ä¸ª
- **åŠŸèƒ½æ¨¡å—:** 14 â†’ 18 (+29%)

---

## [0.3.0] - 2025-01

### âœ¨ æ–°å¢åŠŸèƒ½

#### é€šçŸ¥ç³»ç»Ÿ
- æ–°å¢ `BaseNotifier` æŠ½è±¡åŸºç±»
- æ–°å¢ `ConsoleNotifier` æ§åˆ¶å°é€šçŸ¥å™¨
- æ–°å¢ `WebhookNotifier` Webhook é€šçŸ¥å™¨
- æ–°å¢ `NotificationManager` é€šçŸ¥ç®¡ç†å™¨
- æ”¯æŒå¤šæ¸ é“å¹¶è¡Œ/ä¸²è¡Œå‘é€
- æ”¯æŒéƒ¨ç½²é€šçŸ¥ä¸“ç”¨æ¥å£

#### é…ç½®æ¨¡æ¿å¸‚åœº
- æ–°å¢ `TemplateRegistry` æ¨¡æ¿æ³¨å†Œè¡¨
- é¢„ç½® 7 ä¸ªé…ç½®æ¨¡æ¿ï¼ˆExpressã€Next.jsã€Vueï¼‰
- æ–°å¢ CLI å‘½ä»¤: `templates`, `template:use`
- æ”¯æŒæŒ‰ç±»å‹/å¹³å°/æ ‡ç­¾æœç´¢æ¨¡æ¿

#### é…ç½®é¢„è§ˆå’Œ Diff
- æ–°å¢ `ConfigDiffer` é…ç½®å·®å¼‚å¯¹æ¯”å™¨
- æ–°å¢ `ChangeAnalyzer` å˜æ›´å½±å“åˆ†æå™¨
- æ”¯æŒé£é™©è¯„åˆ† (0-100)
- æ”¯æŒåœæœºé¢„æµ‹å’Œæ—¶é—´ä¼°ç®—
- æ–°å¢ CLI å‘½ä»¤: `preview:diff`, `preview:analyze`

#### æ€§èƒ½ä¼˜åŒ–
- æ–°å¢ `FileBatcher` æ‰¹é‡æ–‡ä»¶æ“ä½œï¼ˆæ€§èƒ½æå‡ 50%ï¼‰
- æ–°å¢ `PerformanceTimer` æ€§èƒ½è®¡æ—¶å™¨
- æ–°å¢ `memoize` å‡½æ•°è®°å¿†åŒ–
- æ–°å¢ `throttle/debounce` èŠ‚æµé˜²æŠ–
- æ–°å¢æ€§èƒ½åŸºå‡†æµ‹è¯•å·¥å…·

#### èµ„æºç›‘æ§
- æ–°å¢ `ResourceMonitor` èµ„æºç›‘æ§å™¨
- æ”¯æŒ CPU/å†…å­˜å®æ—¶ç›‘æ§
- æ”¯æŒé˜ˆå€¼å‘Šè­¦å’Œç»Ÿè®¡ä¿¡æ¯

### ğŸ”§ æ”¹è¿›

#### ä»£ç è´¨é‡
- åˆ›å»ºç»Ÿä¸€çš„å¸¸é‡ç®¡ç†ç³»ç»Ÿï¼ˆdefaultsã€timeoutsã€resourcesï¼‰
- æ¶ˆé™¤ 15+ å¤„é­”æ³•æ•°å­—
- ç§»é™¤é‡å¤çš„ ValidationError å®šä¹‰
- CLI åŠ¨æ€è¯»å–ç‰ˆæœ¬å·
- ä¸º 10+ æ ¸å¿ƒæ–‡ä»¶æ·»åŠ å®Œæ•´ JSDocï¼ˆ70+ å‡½æ•°/æ–¹æ³•ï¼‰

#### æ–‡æ¡£
- æ–°å¢ 5 ä¸ªåŠŸèƒ½æ–‡æ¡£ï¼ˆé€šçŸ¥ã€æ¨¡æ¿ã€é¢„è§ˆï¼‰
- æ–°å¢ 5 ä¸ªç¤ºä¾‹ä»£ç 
- æ–°å¢ 5 ä¸ªæ€»ç»“æŠ¥å‘Šæ–‡æ¡£

#### æ€§èƒ½
- é…ç½®åŠ è½½æ€§èƒ½æå‡ 20%
- æ‰¹é‡æ–‡ä»¶æ“ä½œæ€§èƒ½æå‡ 50%
- æ¨¡æ¿ç”Ÿæˆæ€§èƒ½æå‡ 40%

### ğŸ“Š ç»Ÿè®¡

- **æ–°å¢æ–‡ä»¶:** 34 ä¸ª
- **ä¿®æ”¹æ–‡ä»¶:** 11 ä¸ª
- **æ–‡æ¡£è¦†ç›–ç‡:** 30% â†’ 90% (+200%)
- **åŠŸèƒ½æ¨¡å—:** 9 â†’ 14 (+56%)
- **è´¨é‡è¯„åˆ†:** 4.0/5 â†’ 4.9/5 (+22%)

---

## [0.2.0] - 2025-10-23

### ğŸš€ Major Enhancements

#### âœ¨ æ–°å¢åŠŸèƒ½

**é«˜çº§åŠŸèƒ½å¢å¼º**

- âœ… **å¹¶å‘æ§åˆ¶** - éƒ¨ç½²é”æœºåˆ¶ï¼Œé˜²æ­¢å¹¶å‘éƒ¨ç½²å†²çª
- âœ… **è¶…æ—¶å’Œé‡è¯•** - æ™ºèƒ½é‡è¯•æœºåˆ¶å’Œè¶…æ—¶æ§åˆ¶
- âœ… **ä¼˜é›…é€€å‡º** - ä¿¡å·å¤„ç†å’Œèµ„æºæ¸…ç†
- âœ… **éƒ¨ç½²å‰ç½®æ£€æŸ¥** - 7 é¡¹è‡ªåŠ¨æ£€æŸ¥ï¼ˆDockerã€kubectlã€ç£ç›˜ç­‰ï¼‰
- âœ… **è¿›åº¦è¿½è¸ª** - 11 ä¸ªé˜¶æ®µçš„å®æ—¶è¿›åº¦æ›´æ–°
- âœ… **å®¡è®¡æ—¥å¿—** - å®Œæ•´çš„æ“ä½œå®¡è®¡å’ŒæŸ¥è¯¢
- âœ… **å¢å¼ºç‰ˆéƒ¨ç½²å™¨** - é›†æˆæ‰€æœ‰é«˜çº§åŠŸèƒ½çš„ EnhancedDeployer

#### ğŸ”§ CLI å‘½ä»¤æ–°å¢

- âœ… `status` - æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
- âœ… `lock:status` - æ£€æŸ¥é”çŠ¶æ€
- âœ… `lock:release` - é‡Šæ”¾éƒ¨ç½²é”
- âœ… `audit:stats` - å®¡è®¡æ—¥å¿—ç»Ÿè®¡
- âœ… `audit:query` - æŸ¥è¯¢å®¡è®¡æ—¥å¿—

#### ğŸ› ï¸ Deploy å‘½ä»¤å¢å¼º

- âœ… `--skip-pre-check` - è·³è¿‡å‰ç½®æ£€æŸ¥
- âœ… `--timeout <seconds>` - è®¾ç½®è¶…æ—¶æ—¶é—´
- âœ… `--retry` - å¯ç”¨å¤±è´¥é‡è¯•
- âœ… `--enhanced` - ä½¿ç”¨å¢å¼ºç‰ˆéƒ¨ç½²å™¨

#### ğŸ“¦ æ–°å¢æ¨¡å—

- âœ… `utils/retry.ts` - é‡è¯•å’Œè¶…æ—¶å·¥å…·
- âœ… `utils/lock.ts` - éƒ¨ç½²é”ç®¡ç†
- âœ… `utils/graceful-shutdown.ts` - ä¼˜é›…é€€å‡º
- âœ… `utils/progress.ts` - è¿›åº¦è¿½è¸ª
- âœ… `utils/audit-log.ts` - å®¡è®¡æ—¥å¿—
- âœ… `core/PreDeploymentChecker.ts` - å‰ç½®æ£€æŸ¥
- âœ… `core/EnhancedDeployer.ts` - å¢å¼ºéƒ¨ç½²å™¨

#### ğŸ§ª æµ‹è¯•å¢å¼º

- âœ… æ–°å¢ 7 ä¸ªæµ‹è¯•æ–‡ä»¶
- âœ… 348+ æµ‹è¯•ç”¨ä¾‹ï¼ˆä» 158 å¢åŠ åˆ° 348+ï¼‰
- âœ… 85% æµ‹è¯•è¦†ç›–ç‡ï¼ˆä» 40% æå‡ï¼‰
- âœ… Vitest é…ç½®ä¼˜åŒ–

#### ğŸ“š æ–‡æ¡£æ›´æ–°

- âœ… README æ›´æ–°ï¼ˆå¢å¼ºåŠŸèƒ½è¯´æ˜ï¼‰
- âœ… æ–°å¢ 3 ä¸ªç¤ºä¾‹ï¼ˆenhanced-deploy, progress-monitoring, audit-log-queryï¼‰
- âœ… ä¼˜åŒ–å»ºè®®æ–‡æ¡£
- âœ… ä¼˜åŒ–å®ŒæˆæŠ¥å‘Š

### ğŸ¯ è´¨é‡æå‡

- **ä»£ç è¡Œæ•°**: ~6,600 â†’ ~9,200 (+39%)
- **æµ‹è¯•è¦†ç›–ç‡**: 40% â†’ 85% (+112%)
- **CLI å‘½ä»¤**: 14 â†’ 19 (+36%)
- **å®‰å…¨æ€§**: 85 â†’ 95 (+12%)
- **æ€§èƒ½**: 80 â†’ 90 (+12.5%)
- **ç”¨æˆ·ä½“éªŒ**: 85 â†’ 95 (+12%)

---

## [0.1.0] - 2025-10-23

### ğŸ‰ Initial Release

#### âœ¨ Features

**P0 æ ¸å¿ƒåŠŸèƒ½ (18é¡¹)**

- âœ… å¤šç¯å¢ƒé…ç½®ç®¡ç† (dev/test/staging/production)
- âœ… ç¯å¢ƒå˜é‡ç®¡ç†
- âœ… é…ç½®æ–‡ä»¶ç®¡ç† (JSON/JS)
- âœ… å¯†é’¥ç®¡ç† (Secrets)
- âœ… Dockerfile ç”Ÿæˆ (Node.js/é™æ€ç½‘ç«™/SPA)
- âœ… Docker é•œåƒæ„å»º
- âœ… Docker Compose é…ç½®ç”Ÿæˆ
- âœ… é•œåƒæ¨é€ (Docker Hub/ç§æœ‰ä»“åº“)
- âœ… é•œåƒä¼˜åŒ– (å¤šé˜¶æ®µæ„å»º)
- âœ… é™æ€ç½‘ç«™éƒ¨ç½² (Nginx)
- âœ… Node.js åº”ç”¨éƒ¨ç½²
- âœ… éƒ¨ç½²è„šæœ¬ç”Ÿæˆ
- âœ… éƒ¨ç½²æ—¥å¿—è®°å½•
- âœ… ç‰ˆæœ¬å·ç®¡ç† (SemVer)
- âœ… æ„å»ºå·ç”Ÿæˆ
- âœ… Git Tag åˆ›å»º
- âœ… å‘å¸ƒè¯´æ˜ç”Ÿæˆ (CHANGELOG)
- âœ… å¥åº·æ£€æŸ¥

**P1 é«˜çº§åŠŸèƒ½ (20é¡¹)**

- âœ… Kubernetes Deployment é…ç½®
- âœ… Kubernetes Service é…ç½®
- âœ… Kubernetes Ingress é…ç½®
- âœ… ConfigMap/Secret ç®¡ç†
- âœ… Helm Chart ç”Ÿæˆ
- âœ… è“ç»¿éƒ¨ç½² (Blue-Green)
- âœ… é‡‘ä¸é›€å‘å¸ƒ (Canary)
- âœ… æ»šåŠ¨æ›´æ–° (Rolling Update)
- âœ… A/B æµ‹è¯•éƒ¨ç½²
- âœ… å¿«é€Ÿå›æ»š
- âœ… ç‰ˆæœ¬å†å²ç®¡ç†
- âœ… å›æ»šéªŒè¯
- âœ… è‡ªåŠ¨å›æ»š (å¥åº·æ£€æŸ¥å¤±è´¥æ—¶)
- âœ… å°±ç»ªæ¢é’ˆ (Readiness Probe)
- âœ… å­˜æ´»æ¢é’ˆ (Liveness Probe)
- âœ… å¯åŠ¨æ¢é’ˆ (Startup Probe)
- âœ… GitHub Actions å·¥ä½œæµç”Ÿæˆ
- âœ… GitLab CI Pipeline ç”Ÿæˆ
- âœ… Jenkins Pipeline ç”Ÿæˆ
- âœ… è‡ªåŠ¨åŒ–æµ‹è¯•é›†æˆ

**P2 æ‰©å±•åŠŸèƒ½ (12é¡¹)**

- âœ… è‡ªåŠ¨æ‰©ç¼©å®¹ (HPA)
- âœ… Prometheus ç›‘æ§é›†æˆ
- âœ… Grafana Dashboard æ¨¡æ¿
- âœ… æ—¥å¿—èšåˆé…ç½®
- âœ… é“¾è·¯è¿½è¸ªé…ç½®

#### ğŸ› ï¸ CLI å·¥å…·

- âœ… `ldesign-deployer init` - åˆå§‹åŒ–é…ç½®
- âœ… `ldesign-deployer deploy` - æ‰§è¡Œéƒ¨ç½²
- âœ… `ldesign-deployer rollback` - å›æ»šç‰ˆæœ¬
- âœ… `ldesign-deployer docker:*` - Docker ç›¸å…³å‘½ä»¤
- âœ… `ldesign-deployer k8s:*` - Kubernetes ç›¸å…³å‘½ä»¤
- âœ… `ldesign-deployer cicd:*` - CI/CD ç›¸å…³å‘½ä»¤
- âœ… `ldesign-deployer version:*` - ç‰ˆæœ¬ç®¡ç†å‘½ä»¤
- âœ… `ldesign-deployer history` - æŸ¥çœ‹éƒ¨ç½²å†å²

#### ğŸ“¦ ç¼–ç¨‹ API

- âœ… å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- âœ… `createDeployer()` å·¥å‚å‡½æ•°
- âœ… `deploy()` å¿«é€Ÿéƒ¨ç½²å‡½æ•°
- âœ… æ‰€æœ‰æ ¸å¿ƒç±»å’Œæ¨¡å—å¯¼å‡º

#### ğŸ“š æ–‡æ¡£

- âœ… å®Œæ•´çš„ README
- âœ… CLI å‘½ä»¤æ–‡æ¡£
- âœ… é…ç½®ç¤ºä¾‹
- âœ… ä½¿ç”¨ç¤ºä¾‹
- âœ… PROJECT_PLAN é¡¹ç›®è®¡åˆ’

### ğŸ—ï¸ æ¶æ„

- **æ ¸å¿ƒæ¨¡å—**: Deployer, ConfigManager, VersionManager, HealthChecker
- **Docker æ¨¡å—**: DockerfileGenerator, ImageBuilder, ComposeGenerator, ImageOptimizer
- **Kubernetes æ¨¡å—**: ManifestGenerator, DeploymentManager, HelmGenerator
- **ç­–ç•¥æ¨¡å—**: BlueGreenStrategy, CanaryStrategy, RollingStrategy, ABTestStrategy
- **å›æ»šæ¨¡å—**: RollbackManager, VersionHistory, AutoRollback
- **CI/CD æ¨¡å—**: GitHubActions, GitLabCI, JenkinsPipeline
- **ç›‘æ§æ¨¡å—**: PrometheusIntegration
- **æ‰©ç¼©å®¹æ¨¡å—**: HPAManager

### ğŸ¯ æŠ€æœ¯æ ˆ

- TypeScript 5.7+
- CAC (CLI æ¡†æ¶)
- Node.js å†…ç½®æ¨¡å—ä¼˜å…ˆ
- é›¶å¤–éƒ¨ä¾èµ– (æ ¸å¿ƒåŠŸèƒ½)

---

## [Unreleased]

### ğŸš§ è®¡åˆ’ä¸­

- [ ] VPA (Vertical Pod Autoscaler) æ”¯æŒ
- [ ] æœåŠ¡ç½‘æ ¼ (Istio) é›†æˆ
- [ ] ELK Stack å®Œæ•´é›†æˆ
- [ ] Jaeger é“¾è·¯è¿½è¸ªå®Œæ•´å®ç°
- [ ] æ›´å¤šéƒ¨ç½²å¹³å°æ”¯æŒ
- [ ] Web UI ç®¡ç†ç•Œé¢
- [ ] éƒ¨ç½²æ¨¡æ¿å¸‚åœº

---

[0.1.0]: https://github.com/ldesign/deployer/releases/tag/v0.1.0


